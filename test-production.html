<!DOCTYPE html>
<html>
<head>
    <title>Test Alkemy Production</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1a1a1a;
            color: #00ff00;
        }
        .success { color: #00ff00; }
        .error { color: #ff0000; }
        .info { color: #ffff00; }
        pre {
            background: #000;
            padding: 10px;
            border: 1px solid #333;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>Alkemy Production Test</h1>
    <p>Testing: <a href="https://alkemy1-oxe1s0gjl-qualiasolutionscy.vercel.app" target="_blank">https://alkemy1-oxe1s0gjl-qualiasolutionscy.vercel.app</a></p>

    <div id="results"></div>

    <script>
        const resultsDiv = document.getElementById('results');
        const url = 'https://alkemy1-oxe1s0gjl-qualiasolutionscy.vercel.app';

        async function testProduction() {
            resultsDiv.innerHTML = '<p class="info">Testing production deployment...</p>';

            try {
                // Test 1: Fetch the main page
                const response = await fetch(url, { mode: 'cors' });
                const html = await response.text();

                resultsDiv.innerHTML += `<p class="success">✓ Page fetched successfully (Status: ${response.status})</p>`;

                // Test 2: Check for JavaScript bundles
                const hasAiServices = html.includes('ai-services-');
                const hasIndex = html.includes('index-');
                const hasReact = html.includes('react-vendor-');

                resultsDiv.innerHTML += `<p class="${hasAiServices ? 'success' : 'error'}">
                    ${hasAiServices ? '✓' : '✗'} AI Services bundle found
                </p>`;

                resultsDiv.innerHTML += `<p class="${hasIndex ? 'success' : 'error'}">
                    ${hasIndex ? '✓' : '✗'} Index bundle found
                </p>`;

                resultsDiv.innerHTML += `<p class="${hasReact ? 'success' : 'error'}">
                    ${hasReact ? '✓' : '✗'} React vendor bundle found
                </p>`;

                // Test 3: Check for error indicators
                const hasErrorText = html.toLowerCase().includes('error') ||
                                   html.toLowerCase().includes('cannot access') ||
                                   html.toLowerCase().includes('initialization');

                resultsDiv.innerHTML += `<p class="${!hasErrorText ? 'success' : 'error'}">
                    ${!hasErrorText ? '✓' : '✗'} No error text found in HTML
                </p>`;

                // Test 4: Extract bundle names
                const aiServicesMatch = html.match(/ai-services-([^"']+)\.js/);
                if (aiServicesMatch) {
                    resultsDiv.innerHTML += `<p class="info">AI Services bundle: ai-services-${aiServicesMatch[1]}.js</p>`;
                }

                // Summary
                const allGood = hasAiServices && hasIndex && hasReact && !hasErrorText;
                resultsDiv.innerHTML += `<h2 class="${allGood ? 'success' : 'error'}">
                    ${allGood ? '✅ DEPLOYMENT SUCCESSFUL' : '❌ DEPLOYMENT HAS ISSUES'}
                </h2>`;

                if (allGood) {
                    resultsDiv.innerHTML += `
                        <p class="success">The production site appears to be deployed correctly!</p>
                        <p class="info">Open the browser console on the production site to verify no TDZ errors.</p>
                    `;
                } else {
                    resultsDiv.innerHTML += `<p class="error">Some issues detected. Check the production site directly.</p>`;
                }

            } catch (error) {
                resultsDiv.innerHTML += `<p class="error">✗ Error testing production: ${error.message}</p>`;
            }
        }

        // Run test on load
        testProduction();
    </script>
</body>
</html>